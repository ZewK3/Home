<!DOCTYPE html>
<html lang="vi" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="H·ªá th·ªëng qu·∫£n l√Ω nh√¢n s·ª± chuy√™n nghi·ªáp">
    <meta name="theme-color" content="#2563eb">
    <link rel="icon" href="favicon-32x32.png" sizes="32x32">
    <title>HR Management System - Dashboard</title>
    <link rel="stylesheet" href="dash.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button id="menuToggle" class="menu-toggle" aria-label="Toggle menu">
        <span>‚ò∞</span>
    </button>

    <!-- Theme Switch -->
    <button id="themeSwitch" class="theme-switch" aria-label="Toggle theme">
        <span class="material-icons-round">dark_mode</span>
    </button>

    <!-- User Info Header -->
    <div class="show-user">
        <div class="company-logo">
            <h1><a href="#" onclick="location.reload(); return false;" style="text-decoration: none; color: inherit; cursor: pointer;">HR Management System</a></h1>
        </div>
        <div id="userInfo" class="user-info"></div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <h2 class="sidebar-title">QU·∫¢N L√ù NH√ÇN S·ª∞</h2>
        <ul id="menuList" class="menu-list">
            <li class="menu-item" data-role="AD,QL,NV">
                <a href="#" id="openSchedule" class="menu-link">L·ªãch L√†m</a>
                <ul class="submenu">
                    <li class="submenu-item" data-role="AD,QL,NV">
                        <a href="#" id="openScheduleRegistration" class="submenu-link">ƒêƒÉng K√Ω L·ªãch L√†m</a>
                    </li>
                    <li class="submenu-item" data-role="AD,QL">
                        <a href="#" id="openScheduleWork" class="submenu-link">X·∫øp L·ªãch</a>
                    </li>
                    <li class="submenu-item" data-role="AD,QL,NV">
                        <a href="#" id="openOfficialworkschedule" class="submenu-link">L·ªãch Ch√≠nh Th·ª©c</a>
                    </li>
                </ul>
            </li>
            <li class="menu-item" data-role="AD,AM,QL,NV">
                <a href="#" id="openReward" class="menu-link">Th∆∞·ªüng/Ph·∫°t</a>
            </li>
            <li class="menu-item" data-role="AD,NV">
                <a href="#" id="openSubmitTask" class="menu-link">G·ª≠i Y√™u C·∫ßu</a>
            </li>
            <li class="menu-item" data-role="AD,QL">
                <a href="#" id="openTaskProcessing" class="menu-link">X·ª≠ L√Ω Y√™u C·∫ßu</a>
                <ul class="submenu">
                    <li class="submenu-item" data-role="AD">
                        <a href="#" id="taskPersonnel" class="submenu-link">Nh√¢n S·ª±</a>
                    </li>
                    <li class="submenu-item" data-role="AD,QL">
                        <a href="#" id="taskStore" class="submenu-link">C·ª≠a H√†ng</a>
                    </li>
                    <li class="submenu-item" data-role="AD">
                        <a href="#" id="taskFinance" class="submenu-link">T√†i Ch√≠nh</a>
                    </li>
                    <li class="submenu-item" data-role="AD,QL">
                        <a href="#" id="taskApproval" class="submenu-link">X√©t Duy·ªát</a>
                    </li>
                </ul>
            </li>
            <li class="menu-item" data-role="AD,QL">
                <a href="#" id="openRegistrationApproval" class="menu-link">Duy·ªát ƒêƒÉng K√Ω</a>
            </li>
            <li class="menu-item" data-role="AD">
                <a href="#" id="openGrantAccess" class="menu-link">Ph√¢n Quy·ªÅn</a>
            </li>
            <li class="menu-item" data-role="AD,QL,AM,NV">
                <a href="#" id="openPersonalInformation" class="menu-link">Th√¥ng Tin C√° Nh√¢n</a>
            </li>
        </ul>
        <button id="logout" class="logout-btn">ƒêƒÉng xu·∫•t</button>
    </div>

    <!-- Main Content -->
    <div class="main">
        <div id="notification" class="notification hidden"></div>
        <div id="content" class="content">
            <h1 class="dashboard-title">H·ªá Th·ªëng Qu·∫£n L√Ω Nh√¢n S·ª±</h1>
            
            <!-- Enhanced Dashboard Overview -->
            <div class="welcome-section">
                <!-- Main Statistics Grid -->
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <h3>T·ªïng Nh√¢n Vi√™n</h3>
                            <p id="totalEmployees">-</p>
                            <span class="stat-trend">+2 tu·∫ßn n√†y</span>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-info">
                            <h3>L·ªãch H√¥m Nay</h3>
                            <p id="todaySchedule">-</p>
                            <span class="stat-trend" id="todayScheduleDay">-</span>
                        </div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-info">
                            <h3>Y√™u C·∫ßu Ch·ªù</h3>
                            <p id="pendingRequests">-</p>
                            <span class="stat-trend">C·∫ßn x·ª≠ l√Ω</span>
                        </div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-icon">üí¨</div>
                        <div class="stat-info">
                            <h3>Tin Nh·∫Øn M·ªõi</h3>
                            <p id="recentMessages">-</p>
                            <span class="stat-trend">24h qua</span>
                        </div>
                    </div>
                </div>

                <!-- Role-based Quick Actions -->
                <div class="quick-actions-section" data-roles="AD,QL">
                    <h2 class="section-title">Thao T√°c Nhanh</h2>
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn role-admin" data-action="addEmployee" data-permission="manage_employees">
                            <span class="action-icon">üë§</span>
                            <span class="action-text">Th√™m Nh√¢n Vi√™n</span>
                            <div class="permission-indicator admin">AD</div>
                        </button>
                        <button class="quick-action-btn role-manager" data-action="createSchedule" data-permission="manage_schedules">
                            <span class="action-icon">üìä</span>
                            <span class="action-text">T·∫°o L·ªãch L√†m</span>
                            <div class="permission-indicator manager">QL</div>
                        </button>
                        <button class="quick-action-btn role-manager" data-action="manageRewards" data-permission="manage_rewards">
                            <span class="action-icon">üèÜ</span>
                            <span class="action-text">Qu·∫£n L√Ω Th∆∞·ªüng</span>
                            <div class="permission-indicator manager">QL</div>
                        </button>
                        <button class="quick-action-btn role-admin" data-action="viewReports" data-permission="view_analytics">
                            <span class="action-icon">üìà</span>
                            <span class="action-text">B√°o C√°o</span>
                            <div class="permission-indicator admin">AD</div>
                        </button>
                        <button class="quick-action-btn role-admin" data-action="managePermissions" data-permission="grant_permissions">
                            <span class="action-icon">üîê</span>
                            <span class="action-text">Ph√¢n Quy·ªÅn</span>
                            <div class="permission-indicator admin">AD</div>
                        </button>
                    </div>
                </div>

                <!-- Advanced Analytics Dashboard for Admin -->
                <div class="analytics-section admin-only-section" data-roles="AD">
                    <div class="section-header">
                        <span class="material-icons-round">analytics</span>
                        <h2 class="section-title">Ph√¢n T√≠ch D·ªØ Li·ªáu</h2>
                        <div class="permission-indicator admin">ADMIN ONLY</div>
                    </div>
                    <div class="analytics-grid">
                        <div class="chart-card">
                            <h3>Hi·ªáu Su·∫•t Nh√¢n Vi√™n</h3>
                            <div class="chart-placeholder" id="performanceChart">
                                <p>ƒêang t·∫£i bi·ªÉu ƒë·ªì...</p>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>L·ªãch L√†m Theo Tu·∫ßn</h3>
                            <div class="chart-placeholder" id="scheduleChart">
                                <p>ƒêang t·∫£i bi·ªÉu ƒë·ªì...</p>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Th∆∞·ªüng/Ph·∫°t</h3>
                            <div class="chart-placeholder" id="rewardsChart">
                                <p>ƒêang t·∫£i bi·ªÉu ƒë·ªì...</p>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Doanh Thu</h3>
                            <div class="chart-placeholder" id="revenueChart">
                                <p>ƒêang t·∫£i bi·ªÉu ƒë·ªì...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Store Management for Managers -->
                <div class="store-management-section manager-section" data-roles="AD,QL">
                    <div class="section-header">
                        <span class="material-icons-round">store</span>
                        <h2 class="section-title">Qu·∫£n L√Ω C·ª≠a H√†ng</h2>
                        <div class="permission-indicator manager">MANAGER+</div>
                    </div>
                    <div class="store-grid">
                        <div class="store-card" data-store="ST001" data-permission="manage_stores">
                            <div class="store-header">
                                <h3>C·ª≠a H√†ng Trung T√¢m</h3>
                                <span class="store-status active">Ho·∫°t ƒë·ªông</span>
                            </div>
                            <div class="store-stats">
                                <div class="store-stat">
                                    <span class="stat-label">Nh√¢n vi√™n:</span>
                                    <span class="stat-value" id="store1Employees">-</span>
                                </div>
                                <div class="store-stat">
                                    <span class="stat-label">Ca l√†m h√¥m nay:</span>
                                    <span class="stat-value" id="store1Schedule">-</span>
                                </div>
                            </div>
                            <div class="store-actions">
                                <button class="btn-sm btn-primary" onclick="manageStore('ST001')" data-permission="manage_stores">Qu·∫£n L√Ω</button>
                                <button class="btn-sm btn-outline" onclick="viewStoreSchedule('ST001')">Xem L·ªãch</button>
                            </div>
                        </div>
                        <div class="store-card" data-store="ST002" data-permission="manage_stores">
                            <div class="store-header">
                                <h3>C·ª≠a H√†ng Qu·∫≠n 1</h3>
                                <span class="store-status active">Ho·∫°t ƒë·ªông</span>
                            </div>
                            <div class="store-stats">
                                <div class="store-stat">
                                    <span class="stat-label">Nh√¢n vi√™n:</span>
                                    <span class="stat-value" id="store2Employees">-</span>
                                </div>
                                <div class="store-stat">
                                    <span class="stat-label">Ca l√†m h√¥m nay:</span>
                                    <span class="stat-value" id="store2Schedule">-</span>
                                </div>
                            </div>
                            <div class="store-actions">
                                <button class="btn-sm btn-primary" onclick="manageStore('ST002')" data-permission="manage_stores">Qu·∫£n L√Ω</button>
                                <button class="btn-sm btn-outline" onclick="viewStoreSchedule('ST002')">Xem L·ªãch</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activities -->
                <div class="activities-section">
                    <h2 class="section-title">Ho·∫°t ƒê·ªông G·∫ßn ƒê√¢y</h2>
                    <div class="activities-container">
                        <div id="recentActivities" class="activities-list">
                            <p class="loading-text">ƒêang t·∫£i ho·∫°t ƒë·ªông...</p>
                        </div>
                        <div class="activities-footer">
                            <button class="btn-outline" onclick="loadMoreActivities()">Xem th√™m</button>
                        </div>
                    </div>
                </div>

                <!-- Finance Overview for Admin -->
                <div class="finance-section admin-only-section" data-roles="AD">
                    <div class="section-header">
                        <span class="material-icons-round">account_balance</span>
                        <h2 class="section-title">T·ªïng Quan T√†i Ch√≠nh</h2>
                        <div class="permission-indicator admin">ADMIN ONLY</div>
                    </div>
                    <div class="finance-grid">
                        <div class="finance-card revenue" data-permission="manage_finances">
                            <div class="finance-header">
                                <h3>Doanh Thu Th√°ng</h3>
                                <span class="finance-trend up">‚Üó +12%</span>
                            </div>
                            <div class="finance-amount" id="monthlyRevenue">0 ‚Ç´</div>
                            <div class="finance-subtitle">So v·ªõi th√°ng tr∆∞·ªõc</div>
                        </div>
                        <div class="finance-card expense" data-permission="manage_finances">
                            <div class="finance-header">
                                <h3>Chi Ph√≠ Th√°ng</h3>
                                <span class="finance-trend down">‚Üò -5%</span>
                            </div>
                            <div class="finance-amount" id="monthlyExpense">0 ‚Ç´</div>
                            <div class="finance-subtitle">Ti·∫øt ki·ªám ƒë∆∞·ª£c</div>
                        </div>
                        <div class="finance-card profit" data-permission="manage_finances">
                            <div class="finance-header">
                                <h3>L·ª£i Nhu·∫≠n</h3>
                                <span class="finance-trend up">‚Üó +18%</span>
                            </div>
                            <div class="finance-amount" id="monthlyProfit">0 ‚Ç´</div>
                            <div class="finance-subtitle">TƒÉng tr∆∞·ªüng t·ªët</div>
                        </div>
                        <div class="finance-card payroll" data-permission="manage_finances">
                            <div class="finance-header">
                                <h3>L∆∞∆°ng Nh√¢n Vi√™n</h3>
                                <span class="finance-trend neutral">‚Üí 0%</span>
                            </div>
                            <div class="finance-amount" id="monthlyPayroll">0 ‚Ç´</div>
                            <div class="finance-subtitle">·ªîn ƒë·ªãnh</div>
                        </div>
                    </div>
                </div>

                <!-- Registration Approval for Admin and Managers -->
                <div class="registration-approval-section manager-section" data-roles="AD,QL">
                    <div class="section-header">
                        <span class="material-icons-round">how_to_reg</span>
                        <h2 class="section-title">Duy·ªát ƒêƒÉng K√Ω Nh√¢n Vi√™n</h2>
                        <div class="permission-indicator manager">MANAGER+</div>
                    </div>
                    <div class="approval-container">
                        <div class="approval-header">
                            <div class="approval-filters">
                                <select id="storeFilter" class="filter-select" data-permission="approve_registrations">
                                    <option value="">T·∫•t c·∫£ c·ª≠a h√†ng</option>
                                </select>
                                <button id="refreshPendingBtn" class="refresh-btn">
                                    <span class="material-icons-round">refresh</span>
                                    L√†m m·ªõi
                                </button>
                            </div>
                        </div>
                        <div id="pendingRegistrationsList" class="registrations-list">
                            <p class="loading-text">ƒêang t·∫£i danh s√°ch...</p>
                        </div>
                    </div>
                </div>

                <!-- Personal Dashboard for Employees -->
                <div class="personal-section employee-section" data-roles="NV,AM">
                    <div class="section-header">
                        <span class="material-icons-round">person</span>
                        <h2 class="section-title">Th√¥ng Tin C√° Nh√¢n</h2>
                        <div class="permission-indicator employee">EMPLOYEE</div>
                    </div>
                    <div class="personal-grid">
                        <div class="personal-card schedule">
                            <h3>L·ªãch L√†m Tu·∫ßn N√†y</h3>
                            <div id="personalSchedule" class="schedule-preview">
                                <p>ƒêang t·∫£i l·ªãch l√†m...</p>
                            </div>
                        </div>
                        <div class="personal-card rewards">
                            <h3>Th∆∞·ªüng/Ph·∫°t G·∫ßn ƒê√¢y</h3>
                            <div id="personalRewards" class="rewards-preview">
                                <p>ƒêang t·∫£i th√¥ng tin...</p>
                            </div>
                        </div>
                        <div class="personal-card tasks">
                            <h3>Y√™u C·∫ßu C·ªßa T√¥i</h3>
                            <div id="personalTasks" class="tasks-preview">
                                <p>ƒêang t·∫£i y√™u c·∫ßu...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Permission Management Modal -->
    <div id="permissionModal" class="permission-modal">
        <div class="permission-modal-content">
            <div class="permission-modal-header">
                <h2 class="permission-modal-title">üîê Qu·∫£n L√Ω Ph√¢n Quy·ªÅn</h2>
                <button class="permission-modal-close" onclick="closePermissionModal()">&times;</button>
            </div>
            <div id="permissionModalBody" class="permission-modal-body">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>
