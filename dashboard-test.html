<!DOCTYPE html>
<html lang="vi" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hệ thống quản lý nhân sự chuyên nghiệp">
    <meta name="theme-color" content="#2563eb">
    <link rel="icon" href="../../assets/icons/favicon-32x32.png" sizes="32x32">
    <title>HR Management System - Dashboard</title>
    
    <!-- Enhanced Modern CSS Architecture -->
    <link rel="stylesheet" href="../../assets/css/optimized-base.css">
    <link rel="stylesheet" href="../../assets/css/enhanced-theme-system.css">
    <link rel="stylesheet" href="../../assets/css/layout-system.css">
    <link rel="stylesheet" href="../../assets/css/enhanced-sidebar-system.css">
    <link rel="stylesheet" href="../../assets/css/dashboard-components.css">
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
</head>
<body>
    <!-- Application Container -->
    <div id="dashboardContent" class="dashboard-content">
        <!-- Header -->
        <header class="app-header" role="banner">
            <button id="btnSidebar" class="icon-btn" aria-label="Mở menu" aria-controls="mobileSidebar" aria-expanded="false">
                <span class="material-icons-round">menu</span>
            </button>
            
            <div class="brand">
                <span class="brand-dot" aria-hidden="true"></span>
                <span class="company-name-desktop">ZewK Management System</span>
                <span class="company-name-mobile">ZewK</span>
            </div>
            
            <div class="spacer"></div>
            
            <!-- Header Actions -->
            <div class="header-actions">
                <button class="icon-btn" aria-label="Tìm kiếm">
                    <span class="material-icons-round">search</span>
                </button>
                
                <!-- Theme Toggle -->
                <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
                    <span class="material-icons-round">dark_mode</span>
                </button>
                
                <!-- User Info -->
                <div class="user-info-container">
                    <button id="userInfo" class="user-info-btn" aria-label="Menu người dùng" aria-expanded="false">
                        <span class="material-icons-round user-avatar">person</span>
                        <span class="user-name">Admin</span>
                        <span class="material-icons-round dropdown-arrow">keyboard_arrow_down</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Shell Container -->
        <div class="shell" role="presentation">
            <!-- Enhanced Sidebar -->
            <aside class="app-sidebar permanent" aria-label="Thanh điều hướng">
                <!-- Sidebar Header -->
                <div class="sidebar-header">
                    <div class="sidebar-brand">
                        <div class="brand-icon">
                            <span class="material-icons-round">business</span>
                        </div>
                        <span>HR System</span>
                    </div>
                </div>

                <!-- Sidebar Content -->
                <div class="sidebar-content">
                    <!-- Work Management Group -->
                    <div class="nav-group">
                        <div class="nav-group-title">Quản lý công việc</div>
                        <div class="nav-item-parent" data-menu-toggle="work-management">
                            <div class="nav-title expandable" role="button" tabindex="0" aria-expanded="false" aria-controls="work-management">
                                <span class="material-icons-round">work_outline</span>
                                <span class="nav-text">Quản lý công việc</span>
                                <span class="material-icons-round nav-chevron">expand_more</span>
                            </div>
                        </div>
                        <nav class="nav-submenu" id="work-management" role="menu">
                            <a href="#" id="openWorkManagement" data-role="SUPER_ADMIN,ADMIN,STORE_MANAGER,EMPLOYEE,AD,QL,NV">
                                <span class="material-icons-round">schedule</span>
                                Quản Lý Công
                            </a>
                            <a href="#" id="openTimesheet" data-role="SUPER_ADMIN,ADMIN,AREA_MANAGER,STORE_MANAGER,EMPLOYEE,AD,AM,QL,NV">
                                <span class="material-icons-round">calendar_view_month</span>
                                Bảng Công
                            </a>
                            <a href="#" id="openAttendance" data-role="SUPER_ADMIN,ADMIN,AREA_MANAGER,STORE_MANAGER,EMPLOYEE,AD,AM,QL,NV">
                                <span class="material-icons-round">location_on</span>
                                Chấm Công
                            </a>
                            <a href="#" id="openWorkTasks" data-role="SUPER_ADMIN,ADMIN,AREA_MANAGER,STORE_MANAGER,EMPLOYEE,AD,AM,QL,NV">
                                <span class="material-icons-round">work</span>
                                Công Việc
                            </a>
                        </nav>
                    </div>
                    
                    <!-- Requests Group -->
                    <div class="nav-group">
                        <div class="nav-group-title">Yêu cầu</div>
                        <div class="nav-item-parent" data-menu-toggle="requests">
                            <div class="nav-title expandable" role="button" tabindex="0" aria-expanded="false" aria-controls="requests">
                                <span class="material-icons-round">request_page</span>
                                <span class="nav-text">Yêu cầu</span>
                                <span class="material-icons-round nav-chevron">expand_more</span>
                            </div>
                        </div>
                        <nav class="nav-submenu" id="requests" role="menu">
                            <a href="#" id="openSubmitRequest" data-role="SUPER_ADMIN,ADMIN,EMPLOYEE,AD,NV">
                                <span class="material-icons-round">send</span>
                                Gửi Yêu Cầu
                            </a>
                            <a href="#" id="openAttendanceRequest" data-role="SUPER_ADMIN,ADMIN,EMPLOYEE,AD,NV">
                                <span class="material-icons-round">assignment</span>
                                Đơn Từ
                            </a>
                            <a href="#" id="openTaskAssignment" data-role="SUPER_ADMIN,ADMIN,EMPLOYEE,AD,NV">
                                <span class="material-icons-round">task_alt</span>
                                Nhiệm Vụ
                            </a>
                            <a href="#" id="openShiftAssignment" data-role="SUPER_ADMIN,ADMIN,AREA_MANAGER,STORE_MANAGER,AD,AM,QL">
                                <span class="material-icons-round">schedule_send</span>
                                Phân Ca
                            </a>
                        </nav>
                    </div>
                    
                    <!-- Administration Group -->
                    <div class="nav-group">
                        <div class="nav-group-title">Quản trị</div>
                        <div class="nav-item-parent" data-menu-toggle="admin">
                            <div class="nav-title expandable" role="button" tabindex="0" aria-expanded="false" aria-controls="admin">
                                <span class="material-icons-round">admin_panel_settings</span>
                                <span class="nav-text">Quản trị</span>
                                <span class="material-icons-round nav-chevron">expand_more</span>
                            </div>
                        </div>
                        <nav class="nav-submenu" id="admin" role="menu">
                            <a href="#" id="openTaskProcessing" data-role="SUPER_ADMIN,ADMIN,STORE_MANAGER,AREA_MANAGER,AD,QL,AM">
                                <span class="material-icons-round">pending_actions</span>
                                Xử Lý Yêu Cầu
                            </a>
                            <a href="#" id="openRegistrationApproval" data-role="SUPER_ADMIN,ADMIN,STORE_MANAGER,AD,QL">
                                <span class="material-icons-round">how_to_reg</span>
                                Duyệt Đăng Ký
                            </a>
                            <a href="#" id="openGrantAccess" data-role="SUPER_ADMIN,ADMIN,AD">
                                <span class="material-icons-round">admin_panel_settings</span>
                                Phân Quyền
                            </a>
                            <a href="#" id="openPersonalInformation" data-role="SUPER_ADMIN,ADMIN,STORE_MANAGER,AREA_MANAGER,EMPLOYEE,AD,QL,AM,NV">
                                <span class="material-icons-round">person</span>
                                Thông Tin Cá Nhân
                            </a>
                        </nav>
                    </div>

                    <!-- Single Navigation Items -->
                    <div class="nav-group">
                        <div class="nav-group-title">Báo cáo</div>
                        <div class="nav-item-single">
                            <a href="#" id="openReports" data-role="SUPER_ADMIN,ADMIN,STORE_MANAGER,AREA_MANAGER,AD,QL,AM">
                                <span class="material-icons-round">assessment</span>
                                <span class="nav-text">Báo Cáo</span>
                            </a>
                        </div>
                        <div class="nav-item-single">
                            <a href="#" id="openAnalytics" data-role="SUPER_ADMIN,ADMIN,AD">
                                <span class="material-icons-round">analytics</span>
                                <span class="nav-text">Phân Tích</span>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar Footer -->
                <div class="sidebar-footer">
                    <button id="logout" class="logout-btn">
                        <span class="material-icons-round">logout</span>
                        <span class="nav-text">Đăng xuất</span>
                    </button>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="content" id="main" tabindex="-1">
                <!-- Dashboard Header -->
                <section class="cards">
                    <article class="card span-12">
                        <div class="dashboard-header-content">
                            <div class="header-title-section">
                                <div class="title-icon-container">
                                    <span class="material-icons-round">dashboard</span>
                                </div>
                                <div>
                                    <h1 class="dashboard-title">Hệ Thống Quản Lý Nhân Sự</h1>
                                    <div class="dashboard-breadcrumb">
                                        <span class="material-icons-round">home</span>
                                        <span class="breadcrumb-separator">/</span>
                                        <span class="breadcrumb-item active">Dashboard</span>
                                    </div>
                                </div>
                            </div>
                            <div class="header-actions">
                                <div class="date-time-widget">
                                    <div class="current-date" id="currentDateDisplay"></div>
                                    <div class="current-time" id="currentTimeDisplay"></div>
                                </div>
                                <button class="refresh-btn" id="refreshDashboard">
                                    <span class="material-icons-round">refresh</span>
                                    Làm mới
                                </button>
                            </div>
                        </div>
                    </article>
                </section>

                <!-- Test Content for Sidebar Demo -->
                <section class="cards">
                    <article class="card span-6">
                        <h3>Sidebar Testing</h3>
                        <p>This is a simplified dashboard for testing the enhanced sidebar functionality.</p>
                        <div style="margin-top: 20px;">
                            <h4>Test Instructions:</h4>
                            <ul>
                                <li>Click on "Quản lý công việc" to test parent menu expansion</li>
                                <li>Click on "Yêu cầu" to test another parent menu</li>
                                <li>Click on "Quản trị" to test the third parent menu</li>
                                <li>Try clicking submenu items to test active states</li>
                                <li>Test theme switching with the theme toggle button</li>
                                <li>Test responsive behavior by resizing the window</li>
                            </ul>
                        </div>
                    </article>
                    
                    <article class="card span-6">
                        <h3>Current Status</h3>
                        <div id="statusLog" style="font-family: monospace; background: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 10px;">
                            <div>✅ Enhanced Sidebar Manager: Loaded</div>
                            <div>✅ Enhanced Theme Manager: Loaded</div>
                            <div>📂 Parent Menu: Work Management</div>
                            <div>📂 Parent Menu: Requests</div>
                            <div>📂 Parent Menu: Administration</div>
                            <div>🎯 Click a menu item to test functionality</div>
                        </div>
                    </article>
                </section>
            </main>
        </div>
    </div>

    <!-- Enhanced UI Managers -->
    <script src="../../assets/js/enhanced-ui-managers.js"></script>
    
    <!-- Simple test script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Simple status logger
            const statusLog = document.getElementById('statusLog');
            
            // Log sidebar events
            document.addEventListener('click', (e) => {
                if (e.target.closest('.nav-title')) {
                    const menuText = e.target.closest('.nav-title').textContent.trim();
                    const timestamp = new Date().toLocaleTimeString();
                    statusLog.innerHTML += `<div style="color: #0066cc;">${timestamp}: Clicked parent menu: ${menuText}</div>`;
                }
                
                if (e.target.closest('.nav-submenu a')) {
                    const itemText = e.target.closest('.nav-submenu a').textContent.trim();
                    const timestamp = new Date().toLocaleTimeString();
                    statusLog.innerHTML += `<div style="color: #009900;">${timestamp}: Clicked submenu item: ${itemText}</div>`;
                }
                
                if (e.target.closest('.theme-toggle')) {
                    const timestamp = new Date().toLocaleTimeString();
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    statusLog.innerHTML += `<div style="color: #ff6600;">${timestamp}: Theme toggled to: ${currentTheme}</div>`;
                }
                
                // Auto-scroll to bottom
                statusLog.scrollTop = statusLog.scrollHeight;
            });
            
            // Initialize time display
            function updateTime() {
                const now = new Date();
                const timeDisplay = document.getElementById('currentTimeDisplay');
                const dateDisplay = document.getElementById('currentDateDisplay');
                
                if (timeDisplay) {
                    timeDisplay.textContent = now.toLocaleTimeString();
                }
                
                if (dateDisplay) {
                    dateDisplay.textContent = now.toLocaleDateString();
                }
            }
            
            updateTime();
            setInterval(updateTime, 1000);
        });
    </script>
</body>
</html>