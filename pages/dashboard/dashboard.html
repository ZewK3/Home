<!DOCTYPE html>
<html lang="vi" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="H·ªá th·ªëng qu·∫£n l√Ω nh√¢n s·ª± chuy√™n nghi·ªáp">
    <meta name="theme-color" content="#2563eb">
    <link rel="icon" href="../../assets/icons/favicon-32x32.png" sizes="32x32">
    <title>HR Management System - Dashboard</title>
    
    <!-- Modular CSS Files -->
    <link rel="stylesheet" href="../../assets/css/base.css">
    <link rel="stylesheet" href="../../assets/css/components.css">
    <link rel="stylesheet" href="../../assets/css/navigation.css">
    <link rel="stylesheet" href="../../assets/css/modals.css">
    <link rel="stylesheet" href="../../assets/css/containers.css">
    <link rel="stylesheet" href="../../assets/css/dash.css">
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

</head>
<body>
    <!-- Dashboard Loading Screen -->
    <div id="dashboardLoader" class="dashboard-loader">
        <div class="loader-content">
            <div class="dual-spinner-container">
                <div class="spinner-outer"></div>
                <div class="spinner-inner"></div>
            </div>
            <h3 class="loader-title">ƒêang t·∫£i Dashboard...</h3>
            <p class="loader-subtitle">Vui l√≤ng ƒë·ª£i trong gi√¢y l√°t</p>
            <div class="loader-progress">
                <div class="progress-bar"></div>
            </div>
        </div>
        <div class="loader-background">
            <div class="floating-particles">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard Content (initially hidden) -->
    <div id="dashboardContent" class="dashboard-content">

    <!-- Mobile Navigation Dialog - GitHub Style -->
    <dialog id="mobile-nav-dialog" class="mobile-nav-dialog">
        <div class="mobile-nav-content">
            <div class="mobile-nav-header">
                <h2>Menu</h2>
                <button type="button" class="close-dialog" aria-label="Close navigation">
                    <span class="material-icons-round">close</span>
                </button>
            </div>
            <nav class="mobile-nav">
                <ul id="mobileMenuList" class="mobile-menu-list">
                    <li class="mobile-menu-item" data-role="AD,QL,NV">
                        <a href="#" id="mobileWorkManagement" class="mobile-menu-link">
                            <span class="material-icons-round">schedule</span>
                            Qu·∫£n L√Ω C√¥ng
                        </a>
                        <ul class="mobile-submenu">
                            <li class="mobile-submenu-item" data-role="AD,AM,QL,NV">
                                <a href="#" id="mobileTimesheet" class="mobile-submenu-link">
                                    <span class="material-icons-round">calendar_view_month</span>
                                    B·∫£ng C√¥ng
                                </a>
                            </li>
                            <li class="mobile-submenu-item" data-role="AD,AM,QL,NV">
                                <a href="#" id="mobileAttendance" class="mobile-submenu-link">
                                    <span class="material-icons-round">location_on</span>
                                    Ch·∫•m C√¥ng
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="mobile-menu-item" data-role="AD,AM,QL,NV">
                        <a href="#" id="mobileWorkTasks" class="mobile-menu-link">C√¥ng Vi·ªác</a>
                    </li>
                    <li class="mobile-menu-item" data-role="AD,NV">
                        <a href="#" id="mobileSubmitRequest" class="mobile-menu-link">
                            <span class="material-icons-round">send</span>
                            G·ª≠i Y√™u C·∫ßu
                        </a>
                        <ul class="mobile-submenu">
                            <li class="mobile-submenu-item" data-role="AD,NV">
                                <a href="#" id="mobileAttendanceRequest" class="mobile-submenu-link">
                                    <span class="material-icons-round">assignment</span>
                                    ƒê∆°n T·ª´
                                </a>
                            </li>
                            <li class="mobile-submenu-item" data-role="AD,NV">
                                <a href="#" id="mobileTaskAssignment" class="mobile-submenu-link">
                                    <span class="material-icons-round">task_alt</span>
                                    Nhi·ªám V·ª•
                                </a>
                            </li>
                            <li class="mobile-submenu-item" data-role="AD,AM,QL">
                                <a href="#" id="mobileShiftAssignment" class="mobile-submenu-link">
                                    <span class="material-icons-round">schedule_send</span>
                                    Ph√¢n Ca
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="mobile-menu-item" data-role="AD,QL">
                        <a href="#" id="mobileTaskProcessing" class="mobile-menu-link">X·ª≠ L√Ω Y√™u C·∫ßu</a>
                        <ul class="mobile-submenu">
                            <li class="mobile-submenu-item" data-role="AD">
                                <a href="#" id="mobileTaskPersonnel" class="mobile-submenu-link">Nh√¢n S·ª±</a>
                            </li>
                            <li class="mobile-submenu-item" data-role="AD,QL">
                                <a href="#" id="mobileTaskStore" class="mobile-submenu-link">C·ª≠a H√†ng</a>
                            </li>
                            <li class="mobile-submenu-item" data-role="AD">
                                <a href="#" id="mobileTaskFinance" class="mobile-submenu-link">T√†i Ch√≠nh</a>
                            </li>
                            <li class="mobile-submenu-item" data-role="AD,QL">
                                <a href="#" id="mobileTaskApproval" class="mobile-submenu-link">X√©t Duy·ªát</a>
                            </li>
                        </ul>
                    </li>
                    <li class="mobile-menu-item" data-role="AD,QL">
                        <a href="#" id="mobileRegistrationApproval" class="mobile-menu-link">Duy·ªát ƒêƒÉng K√Ω</a>
                    </li>
                    <li class="mobile-menu-item" data-role="AD">
                        <a href="#" id="mobileGrantAccess" class="mobile-menu-link">Ph√¢n Quy·ªÅn</a>
                    </li>
                    <li class="mobile-menu-item" data-role="AD,QL,AM,NV">
                        <a href="#" id="mobilePersonalInformation" class="mobile-menu-link">Th√¥ng Tin C√° Nh√¢n</a>
                    </li>
                </ul>
                <div class="mobile-nav-footer">
                    <button id="mobileLogout" class="mobile-logout-btn">
                        <span class="material-icons-round">logout</span>
                        ƒêƒÉng xu·∫•t
                    </button>
                </div>
            </nav>
        </div>
    </dialog>

    <!-- Mobile Sidebar Overlay -->
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <!-- Mobile Menu Toggle - positioned independently -->
    <button id="menuToggle" class="menu-toggle" aria-label="Toggle navigation" data-target="mobile-nav-dialog">
        <span class="menu-icon">
            <span class="menu-line"></span>
            <span class="menu-line"></span>
            <span class="menu-line"></span>
        </span>
    </button>

    <!-- User Info Header - GitHub AppHeader Style -->
    <div class="show-user AppHeader-globalBar pb-2 js-global-bar">
        <div class="AppHeader-context">
            <div class="company-logo">
                <h1><a href="#" id="companyLogoLink" class="AppHeader-logo" style="text-decoration: none; color: inherit; cursor: pointer;">
                    <span class="company-name-desktop">ZewK Management System</span>
                    <span class="company-name-mobile">ZewK</span>
                </a></h1>
            </div>
        </div>
        <div class="AppHeader-actions">
            <div class="AppHeader-user">
                <div id="userInfo" class="user-info"></div>
                <div id="currentTime" class="current-time">
                    <span id="timeIcon" class="time-icon material-icons-round">wb_sunny</span>
                    <span id="timeDisplay" class="time-display">00:00</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <ul id="menuList" class="menu-list">
            <li class="menu-item" data-role="AD,QL,NV">
                <a href="#" id="openWorkManagement" class="menu-link">
                    <span class="material-icons-round">schedule</span>
                    Qu·∫£n L√Ω C√¥ng
                </a>
                <ul class="submenu">
                    <li class="submenu-item" data-role="AD,AM,QL,NV">
                        <a href="#" id="openTimesheet" class="submenu-link">
                            <span class="material-icons-round">calendar_view_month</span>
                            B·∫£ng C√¥ng
                        </a>
                    </li>
                    <li class="submenu-item" data-role="AD,AM,QL,NV">
                        <a href="#" id="openAttendance" class="submenu-link">
                            <span class="material-icons-round">location_on</span>
                            Ch·∫•m C√¥ng
                        </a>
                    </li>
                </ul>
            </li>
            <li class="menu-item" data-role="AD,AM,QL,NV">
                <a href="#" id="openWorkTasks" class="menu-link">
                    <span class="material-icons-round">work</span>
                    C√¥ng Vi·ªác
                </a>
            </li>
            <li class="menu-item" data-role="AD,NV">
                <a href="#" id="openSubmitRequest" class="menu-link">
                    <span class="material-icons-round">send</span>
                    G·ª≠i Y√™u C·∫ßu
                </a>
                <ul class="submenu">
                    <li class="submenu-item" data-role="AD,NV">
                        <a href="#" id="openAttendanceRequest" class="submenu-link">
                            <span class="material-icons-round">assignment</span>
                            ƒê∆°n T·ª´
                        </a>
                    </li>
                    <li class="submenu-item" data-role="AD,NV">
                        <a href="#" id="openTaskAssignment" class="submenu-link">
                            <span class="material-icons-round">task_alt</span>
                            Nhi·ªám V·ª•
                        </a>
                    </li>
                    <li class="submenu-item" data-role="AD,AM,QL">
                        <a href="#" id="openShiftAssignment" class="submenu-link">
                            <span class="material-icons-round">schedule_send</span>
                            Ph√¢n Ca
                        </a>
                    </li>
                </ul>
            </li>
            <li class="menu-item" data-role="AD,QL,AM">
                <a href="#" id="openTaskProcessing" class="menu-link">X·ª≠ L√Ω Y√™u C·∫ßu</a>
                <ul class="submenu">
                    <li class="submenu-item" data-role="AD,QL">
                        <a href="#" id="taskPersonnel" class="submenu-link">Nh√¢n S·ª±</a>
                    </li>
                    <li class="submenu-item" data-role="AD,AM">
                        <a href="#" id="taskStore" class="submenu-link">C·ª≠a H√†ng</a>
                    </li>
                    <li class="submenu-item" data-role="AD">
                        <a href="#" id="taskFinance" class="submenu-link">T√†i Ch√≠nh</a>
                    </li>
                    <li class="submenu-item" data-role="AD,QL">
                        <a href="#" id="taskApproval" class="submenu-link">X√©t Duy·ªát</a>
                    </li>
                </ul>
            </li>
            <li class="menu-item" data-role="AD,QL">
                <a href="#" id="openRegistrationApproval" class="menu-link">Duy·ªát ƒêƒÉng K√Ω</a>
            </li>
            <li class="menu-item" data-role="AD">
                <a href="#" id="openGrantAccess" class="menu-link">Ph√¢n Quy·ªÅn</a>
            </li>
            <li class="menu-item" data-role="AD,QL,AM,NV">
                <a href="#" id="openPersonalInformation" class="menu-link">Th√¥ng Tin C√° Nh√¢n</a>
            </li>
        </ul>
        <button id="logout" class="logout-btn">ƒêƒÉng xu·∫•t</button>
    </div>

    <!-- Enhanced Loading Screen -->
    <div id="loadingScreen" class="loading-screen hidden">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2 class="loading-text">ƒêang t·∫£i h·ªá th·ªëng HR</h2>
            <p style="color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 0;">Vui l√≤ng ch·ªù trong gi√¢y l√°t</p>
            <div class="loading-dots">
                <span class="loading-dot"></span>
                <span class="loading-dot"></span>
                <span class="loading-dot"></span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main dashboard-main-fade-in">
        <div id="notification" class="notification hidden"></div>
        <div id="content" class="content">
            <h1 class="dashboard-title">H·ªá Th·ªëng Qu·∫£n L√Ω Nh√¢n S·ª±</h1>
            
            <!-- Enhanced Dashboard Overview -->
            <div class="welcome-section">
                <!-- Main Statistics Grid -->
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <h3>T·ªïng Nh√¢n Vi√™n</h3>
                            <p id="totalEmployees">-</p>
                            <span class="stat-trend">+2 tu·∫ßn n√†y</span>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-info">
                            <h3>Ca H√¥m Nay</h3>
                            <p id="todayShift">-</p>
                            <span class="stat-trend" id="todayShiftTime">-</span>
                        </div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-info">
                            <h3>Y√™u C·∫ßu Ch·ªù</h3>
                            <p id="pendingRequests">-</p>
                            <span class="stat-trend">C·∫ßn x·ª≠ l√Ω</span>
                        </div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-icon">üí¨</div>
                        <div class="stat-info">
                            <h3>Tin Nh·∫Øn M·ªõi</h3>
                            <p id="recentMessages">-</p>
                            <span class="stat-trend">24h qua</span>
                        </div>
                    </div>
                </div>

                <!-- Role-based Quick Actions -->
                <div class="quick-actions-section">
                    <h2 class="section-title">Thao T√°c Nhanh</h2>
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" data-action="addEmployee">
                            <span class="action-icon">üë§</span>
                            <span class="action-text">Th√™m Nh√¢n Vi√™n</span>
                        </button>
                        <button class="quick-action-btn" data-action="assignShift">
                            <span class="action-icon">üìä</span>
                            <span class="action-text">Ph√¢n Ca</span>
                        </button>
                        <button class="quick-action-btn" data-action="manageRewards">
                            <span class="action-icon">üèÜ</span>
                            <span class="action-text">Qu·∫£n L√Ω Th∆∞·ªüng</span>
                        </button>
                        <button class="quick-action-btn" data-action="viewReports">
                            <span class="action-icon">üìà</span>
                            <span class="action-text">B√°o C√°o</span>
                        </button>
                    </div>
                </div>

                <!-- Advanced Analytics Dashboard for Admin -->
                <div class="analytics-section">
                    <h2 class="section-title">Ph√¢n T√≠ch D·ªØ Li·ªáu</h2>
                    <div class="analytics-grid">
                        <div class="chart-card">
                            <h3>Hi·ªáu Su·∫•t Nh√¢n Vi√™n</h3>
                            <div class="chart-placeholder" id="performanceChart">
                                <p>ƒêang t·∫£i bi·ªÉu ƒë·ªì...</p>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>L·ªãch L√†m Theo Tu·∫ßn</h3>
                            <div class="chart-placeholder" id="scheduleChart">
                                <p>ƒêang t·∫£i bi·ªÉu ƒë·ªì...</p>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Th∆∞·ªüng/Ph·∫°t</h3>
                            <div class="chart-placeholder" id="rewardsChart">
                                <p>ƒêang t·∫£i bi·ªÉu ƒë·ªì...</p>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Doanh Thu</h3>
                            <div class="chart-placeholder" id="revenueChart">
                                <p>ƒêang t·∫£i bi·ªÉu ƒë·ªì...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Store Management for Managers -->
                <div class="store-management-section">
                    <h2 class="section-title">Qu·∫£n L√Ω C·ª≠a H√†ng</h2>
                    <div class="store-grid">
                        <div class="store-card" data-store="ST001">
                            <div class="store-header">
                                <h3>C·ª≠a H√†ng Trung T√¢m</h3>
                                <span class="store-status active">Ho·∫°t ƒë·ªông</span>
                            </div>
                            <div class="store-stats">
                                <div class="store-stat">
                                    <span class="stat-label">Nh√¢n vi√™n:</span>
                                    <span class="stat-value" id="store1Employees">-</span>
                                </div>
                                <div class="store-stat">
                                    <span class="stat-label">Ca l√†m h√¥m nay:</span>
                                    <span class="stat-value" id="store1Shift">-</span>
                                </div>
                            </div>
                            <div class="store-actions">
                                <button class="btn-sm btn-primary" onclick="manageStore('ST001')">Qu·∫£n L√Ω</button>
                                <button class="btn-sm btn-outline" onclick="viewStoreShifts('ST001')">Xem Ca</button>
                            </div>
                        </div>
                        <div class="store-card" data-store="ST002">
                            <div class="store-header">
                                <h3>C·ª≠a H√†ng Qu·∫≠n 1</h3>
                                <span class="store-status active">Ho·∫°t ƒë·ªông</span>
                            </div>
                            <div class="store-stats">
                                <div class="store-stat">
                                    <span class="stat-label">Nh√¢n vi√™n:</span>
                                    <span class="stat-value" id="store2Employees">-</span>
                                </div>
                                <div class="store-stat">
                                    <span class="stat-label">Ca l√†m h√¥m nay:</span>
                                    <span class="stat-value" id="store2Shift">-</span>
                                </div>
                            </div>
                            <div class="store-actions">
                                <button class="btn-sm btn-primary" onclick="manageStore('ST002')">Qu·∫£n L√Ω</button>
                                <button class="btn-sm btn-outline" onclick="viewStoreShifts('ST002')">Xem Ca</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activities -->
                <div class="activities-section">
                    <h2 class="section-title">Ho·∫°t ƒê·ªông G·∫ßn ƒê√¢y</h2>
                    <div class="activities-container">
                        <div id="recentActivities" class="activities-list">
                            <p class="loading-text">ƒêang t·∫£i ho·∫°t ƒë·ªông...</p>
                        </div>
                        <div class="activities-footer">
                            <button class="btn-outline" onclick="loadMoreActivities()">Xem th√™m</button>
                        </div>
                    </div>
                </div>

                <!-- Finance Overview for Admin -->
                <div class="finance-section">
                    <h2 class="section-title">T·ªïng Quan T√†i Ch√≠nh</h2>
                    <div class="finance-grid">
                        <div class="finance-card revenue">
                            <div class="finance-header">
                                <h3>Doanh Thu Th√°ng</h3>
                                <span class="finance-trend up">‚Üó +12%</span>
                            </div>
                            <div class="finance-amount" id="monthlyRevenue">0 ‚Ç´</div>
                            <div class="finance-subtitle">So v·ªõi th√°ng tr∆∞·ªõc</div>
                        </div>
                        <div class="finance-card expense">
                            <div class="finance-header">
                                <h3>Chi Ph√≠ Th√°ng</h3>
                                <span class="finance-trend down">‚Üò -5%</span>
                            </div>
                            <div class="finance-amount" id="monthlyExpense">0 ‚Ç´</div>
                            <div class="finance-subtitle">Ti·∫øt ki·ªám ƒë∆∞·ª£c</div>
                        </div>
                        <div class="finance-card profit">
                            <div class="finance-header">
                                <h3>L·ª£i Nhu·∫≠n</h3>
                                <span class="finance-trend up">‚Üó +18%</span>
                            </div>
                            <div class="finance-amount" id="monthlyProfit">0 ‚Ç´</div>
                            <div class="finance-subtitle">TƒÉng tr∆∞·ªüng t·ªët</div>
                        </div>
                        <div class="finance-card payroll">
                            <div class="finance-header">
                                <h3>L∆∞∆°ng Nh√¢n Vi√™n</h3>
                                <span class="finance-trend neutral">‚Üí 0%</span>
                            </div>
                            <div class="finance-amount" id="monthlyPayroll">0 ‚Ç´</div>
                            <div class="finance-subtitle">·ªîn ƒë·ªãnh</div>
                        </div>
                    </div>
                </div>

                <!-- Registration Approval for Admin and Managers -->
                <div class="registration-approval-section">
                    <h2 class="section-title">Duy·ªát ƒêƒÉng K√Ω Nh√¢n Vi√™n</h2>
                    <div class="approval-container">
                        <div class="approval-header">
                            <div class="approval-filters">
                                <select id="storeFilter" class="filter-select">
                                    <option value="">T·∫•t c·∫£ c·ª≠a h√†ng</option>
                                </select>
                                <button id="refreshPendingBtn" class="refresh-btn">
                                    <span class="material-icons-round">refresh</span>
                                    L√†m m·ªõi
                                </button>
                            </div>
                        </div>
                        <div id="pendingRegistrationsList" class="registrations-list">
                            <p class="loading-text">ƒêang t·∫£i danh s√°ch...</p>
                        </div>
                    </div>
                </div>

                <!-- Personal Dashboard for Employees -->
                <div class="personal-section">
                    <h2 class="section-title">Th√¥ng Tin C√° Nh√¢n</h2>
                    <div class="personal-grid">
                        <div class="personal-card schedule">
                            <h3>Ca L√†m Tu·∫ßn N√†y</h3>
                            <div id="personalShifts" class="shift-preview">
                                <p>ƒêang t·∫£i ca l√†m...</p>
                            </div>
                        </div>
                        <div class="personal-card rewards">
                            <h3>Th∆∞·ªüng/Ph·∫°t G·∫ßn ƒê√¢y</h3>
                            <div id="personalRewards" class="rewards-preview">
                                <p>ƒêang t·∫£i th√¥ng tin...</p>
                            </div>
                        </div>
                        <div class="personal-card tasks">
                            <h3>Y√™u C·∫ßu C·ªßa T√¥i</h3>
                            <div id="personalTasks" class="tasks-preview">
                                <p>ƒêang t·∫£i y√™u c·∫ßu...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <!-- Load JavaScript modules in correct order -->
    <script src="../../assets/js/config.js"></script>
    <script src="../../assets/js/utils.js"></script>
    <script src="../../assets/js/api-cache.js"></script>
    <script src="../../assets/js/auth-manager.js"></script>
    <script src="../../assets/js/theme-manager.js"></script>
    <script src="../../assets/js/menu-manager.js"></script>
    <script src="../../assets/js/navigation-manager.js"></script>
    <script src="../../assets/js/content-manager.js"></script>
    <script src="../../assets/js/dashboard-handler.js"></script>
    <script src="../../assets/js/script.js"></script>
    <script src="../../assets/js/main-init.js"></script>
    </div> <!-- End dashboardContent -->
</body>
</html>
